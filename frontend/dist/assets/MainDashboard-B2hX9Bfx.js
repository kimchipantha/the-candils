import{d as x,a as i,o as n,b as e,t as y,Y as K,F as B,r as P,n as U,e as W,Z as L,$ as O,a0 as F,a1 as Z,a2 as J,a3 as M,a4 as T,a5 as j,a6 as Y,c as f,x as _,B as k,a7 as Q,a8 as N,m as I,s as D,a9 as H,aa as X,ab as ee,ac as te,g as ae,q as se,w as re,j as E,v as z,ad as oe,ae as le,af as ne,I as de,ag as ie}from"./index-BWtGjQtB.js";const ce={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 transition-all duration-300 hover:shadow-md hover:border-primary/20 group"},ue={class:"flex items-center justify-between mb-4"},pe={class:"flex items-center space-x-3"},ge={class:"text-sm font-semibold text-gray-500 uppercase tracking-wider truncate max-w-[150px]"},me={class:"flex flex-col"},he={class:"text-3xl font-bold text-gray-900 tracking-tight"},be={class:"mt-4 pt-4 border-t border-gray-50 flex items-center justify-between"},ve={class:"text-sm font-bold text-green-600 bg-green-50 px-2 py-1 rounded-md"},ye=x({__name:"LocationCard",props:{location:{type:Object,required:!0}},setup(m){const t=g=>{const s=parseFloat(g);return isNaN(s)?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s)};return(g,s)=>(n(),i("div",ce,[e("div",ue,[e("div",pe,[s[0]||(s[0]=e("div",{class:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-colors"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),e("h3",ge,y(m.location.lokasi_name),1)])]),e("div",me,[s[1]||(s[1]=e("span",{class:"text-xs text-gray-400 font-medium mb-1"},"Total Pendapatan",-1)),e("p",he,y(t(m.location.total_revenue)),1)]),e("div",be,[s[2]||(s[2]=e("span",{class:"text-sm text-gray-500"},"Produk Terjual",-1)),e("span",ve,y(m.location.total_products_sold)+" Unit ",1)])]))}}),fe={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 h-full flex flex-col"},xe={key:0,class:"flex-grow overflow-y-auto pr-2 custom-scrollbar"},we={class:"space-y-3"},_e={class:"flex items-center min-w-0"},ke={class:"ml-2"},De={class:"font-semibold text-gray-900 text-sm group-hover:text-primary transition-colors"},Ce={class:"flex items-center text-xs text-gray-500 mt-1 space-x-3"},$e={class:"flex items-center bg-yellow-50 text-yellow-700 px-1.5 py-0.5 rounded border border-yellow-100"},Ie={class:"font-medium text-gray-600"},Be=["onClick"],Pe={key:1,class:"h-full flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200"},Le=x({__name:"UlasanCard",props:{reviews:{}},setup(m){const t=K(),g=s=>{t.push({name:"admin-review",query:{productId:s.toString()}})};return(s,p)=>(n(),i("div",fe,[p[2]||(p[2]=e("div",{class:"flex justify-between items-center mb-6"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Top Produk Populer"),e("a",{href:"#",class:"text-sm text-primary hover:text-primary/80 font-medium"},"Lihat Semua")],-1)),s.reviews&&s.reviews.length>0?(n(),i("div",xe,[e("ul",we,[(n(!0),i(B,null,P(s.reviews.slice(0,7),(o,c)=>(n(),i("li",{key:o.produkId,class:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors group"},[e("div",_e,[e("span",{class:U([{"text-primary font-bold":c<3,"text-gray-400 font-medium":c>=3},"text-lg w-8 flex-shrink-0"])}," #"+y(c+1),3),e("div",ke,[e("p",De,y(o.namaProduk),1),e("div",Ce,[e("span",$e,[p[0]||(p[0]=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-3 h-3 mr-1 text-yellow-500"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),W(" "+y(parseFloat(o.average_rating).toFixed(1)),1)]),e("span",Ie,y(o.total_quantity_sold)+" Terjual",1)])])]),e("button",{onClick:u=>g(o.produkId),class:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 text-xs bg-white border border-gray-200 hover:border-primary/50 text-gray-600 hover:text-primary font-medium py-1.5 px-3 rounded-md shadow-sm"}," Detail ",8,Be)]))),128))])])):(n(),i("div",Pe,[...p[1]||(p[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})],-1),e("span",{class:"text-sm"},"Belum ada data populer",-1)])]))]))}}),Te={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 h-full"},je={key:0,class:"h-[350px] w-full"},Re={key:1,class:"h-64 flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200"},S="#BAB772",Se="rgba(186, 183, 114, 0.3)",Oe=x({__name:"GrafikCard",props:{graphData:{}},setup(m){L.register(O,F,Z,J,M,T,j,Y);const t=m,g=o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o),s=f(()=>({labels:t.graphData?.labels||[],datasets:[{label:"Omset Harian",data:t.graphData?.data||[],borderColor:S,tension:.4,fill:!0,backgroundColor:Se,pointBackgroundColor:S,pointBorderColor:"#fff",pointHoverRadius:6,pointHoverBackgroundColor:S}]})),p={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.7)",callbacks:{label:function(o){let c=o.dataset.label||"";return o.parsed.y!==null&&(c+=`: ${g(o.parsed.y)}`),c}}}},scales:{y:{beginAtZero:!0,grid:{color:"#f3f4f6"},ticks:{color:"#6b7280",callback:function(o){const c=parseFloat(o);return new Intl.NumberFormat("id-ID",{notation:"compact",maximumFractionDigits:0}).format(c)}}},x:{grid:{display:!1},ticks:{color:"#6b7280"}}}};return(o,c)=>(n(),i("div",Te,[c[1]||(c[1]=e("div",{class:"flex justify-between items-center mb-6"},[e("div",null,[e("h3",{class:"text-lg font-bold text-gray-900"},"Grafik Penjualan Harian"),e("p",{class:"text-sm text-gray-500"},"Tren pendapatan dalam 7 hari terakhir")]),e("div",{class:"flex items-center space-x-2 bg-gray-50 rounded-lg p-1 border border-gray-100"})],-1)),o.graphData&&o.graphData.data.length>0?(n(),i("div",je,[_(k(Q),{data:s.value,options:p},null,8,["data"])])):(n(),i("div",Re,[...c[0]||(c[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})],-1),e("span",{class:"text-sm font-medium"},"Belum ada data penjualan",-1)])]))]))}}),Fe={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 h-full"},Me={class:"h-64 relative w-full"},Ae={key:1,class:"h-full flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200"},V="#BAB772",Ee=x({__name:"RevenueChart",props:{revenueData:{}},emits:["location-click"],setup(m,{emit:t}){L.register(O,F,N,M,T,j);const g=m,s=f(()=>g.revenueData),p=r=>new Intl.NumberFormat("id-ID",{notation:"compact",maximumFractionDigits:1}).format(r),o=f(()=>({labels:s.value.map(r=>r.lokasi),datasets:[{label:"Total Pendapatan",data:s.value.map(r=>r.totalPendapatan),backgroundColor:V,borderColor:V,borderWidth:0,borderRadius:6,borderSkipped:!1}]})),c={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",callbacks:{label:function(r){const a=r.parsed.y;return`Pendapatan: ${new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a)}`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6B7280"}},y:{type:"linear",beginAtZero:!0,grid:{color:"#E5E7EB"},ticks:{color:"#6B7280",callback:function(r){return p(parseFloat(r))}}}},interaction:{intersect:!1,mode:"index"},onClick:(r,a)=>{if(a&&a.length>0){const l=a[0].index,d=s.value[l];d&&u("location-click",d.lokasiId)}}},u=t;return(r,a)=>(n(),i("div",Fe,[a[1]||(a[1]=I('<div class="flex justify-between items-center mb-6"><div><h3 class="text-lg font-bold text-gray-900">Pendapatan per Lokasi</h3><p class="text-sm text-gray-500">Perbandingan performa antar cabang</p></div><button class="text-gray-400 hover:text-indigo-600 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path></svg></button></div>',1)),e("div",Me,[s.value&&s.value.length>0?(n(),D(k(H),{key:0,data:o.value,options:c},null,8,["data"])):(n(),i("div",Ae,[...a[0]||(a[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("span",{class:"text-sm"},"Tidak ada data pendapatan lokasi",-1)])]))])]))}}),ze={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 h-full flex flex-col"},Ve={class:"flex-grow relative min-h-[250px] flex items-center justify-center"},Ne={key:1,class:"flex flex-col items-center justify-center text-gray-400 w-full h-full bg-gray-50 rounded-lg border-2 border-dashed border-gray-200"},He=x({__name:"ChartProductSold",props:{summaryData:{}},emits:["product-click"],setup(m,{emit:t}){L.register(X,T,j);const g=m,s=f(()=>g.summaryData),p=["#BAB772","#D4D196","#95925B","#E5E7EB","#F59E0B","#10B981"],o=f(()=>({labels:s.value.map(r=>r.namaProduk),datasets:[{label:"Jumlah Terjual",data:s.value.map(r=>parseInt(r.total_quantity_sold)),backgroundColor:p,hoverOffset:8}]})),c={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{font:{size:12},color:"#374151"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",callbacks:{label:function(r){const a=s.value.reduce((h,b)=>h+parseInt(b.total_quantity_sold),0),l=r.raw,d=(l/a*100).toFixed(1)+"%";return`${r.label}: ${l} unit (${d})`}}}},onClick:(r,a)=>{if(a&&a.length>0){const l=a[0].index,d=s.value[l];d&&u("product-click",d.produkId)}}},u=t;return(r,a)=>(n(),i("div",ze,[a[1]||(a[1]=e("div",{class:"mb-6"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Kontribusi Produk"),e("p",{class:"text-sm text-gray-500"},"Persentase penjualan per item")],-1)),e("div",Ve,[s.value&&s.value.length>0?(n(),D(k(ee),{key:0,data:o.value,options:c},null,8,["data"])):(n(),i("div",Ne,[...a[0]||(a[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})],-1),e("span",{class:"text-sm"},"Belum ada data kontribusi",-1)])]))])]))}}),Ge={},qe={class:"animate-pulse space-y-8"},Ke={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"},Ue={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},We={class:"lg:col-span-1 bg-white rounded-xl p-6 border border-gray-100 shadow-sm h-full min-h-[774px]"},Ze={class:"space-y-6"};function Je(m,t){return n(),i("div",qe,[e("div",Ke,[(n(),i(B,null,P(3,g=>e("div",{key:g,class:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm flex flex-col justify-between h-48"},[...t[0]||(t[0]=[I('<div class="flex items-center space-x-3 mb-4"><div class="h-10 w-10 bg-gray-200 rounded-lg"></div><div class="h-4 bg-gray-200 rounded w-24"></div></div><div class="flex flex-col space-y-2 mb-4"><div class="h-3 bg-gray-200 rounded w-20"></div><div class="h-8 bg-gray-200 rounded w-32"></div></div><div class="pt-4 border-t border-gray-50 flex justify-between items-center"><div class="h-3 bg-gray-200 rounded w-20"></div><div class="h-6 bg-gray-200 rounded w-16"></div></div>',3)])])),64))]),t[4]||(t[4]=I('<div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-2 bg-white rounded-xl p-6 border border-gray-100 shadow-sm h-[400px]"><div class="flex justify-between items-center mb-6"><div class="h-6 bg-gray-200 rounded w-48"></div><div class="h-8 bg-gray-200 rounded w-32"></div></div><div class="h-64 bg-gray-200 rounded w-full"></div></div><div class="lg:col-span-1 bg-white rounded-xl p-6 border border-gray-100 shadow-sm h-[400px]"><div class="h-6 bg-gray-200 rounded w-32 mb-6"></div><div class="flex items-center justify-center h-64"><div class="h-48 w-48 bg-gray-200 rounded-full"></div></div></div></div>',1)),e("div",Ue,[t[3]||(t[3]=I('<div class="lg:col-span-2 flex flex-col gap-6"><div class="bg-white rounded-xl p-6 border border-gray-100 shadow-sm h-[350px]"><div class="h-6 bg-gray-200 rounded w-48 mb-6"></div><div class="h-56 bg-gray-200 rounded w-full"></div></div><div class="bg-white rounded-xl p-6 border border-gray-100 shadow-sm h-[400px]"><div class="h-6 bg-gray-200 rounded w-48 mb-6"></div><div class="h-64 bg-gray-200 rounded w-full"></div></div></div>',1)),e("div",We,[t[2]||(t[2]=e("div",{class:"flex justify-between items-center mb-6"},[e("div",{class:"h-6 bg-gray-200 rounded w-32"}),e("div",{class:"h-4 bg-gray-200 rounded w-16"})],-1)),e("div",Ze,[(n(),i(B,null,P(10,g=>e("div",{key:g,class:"flex items-center space-x-3"},[...t[1]||(t[1]=[e("div",{class:"h-10 w-10 bg-gray-200 rounded-full"},null,-1),e("div",{class:"flex-1 space-y-2"},[e("div",{class:"h-4 bg-gray-200 rounded w-3/4"}),e("div",{class:"h-3 bg-gray-200 rounded w-1/2"})],-1)])])),64))])])])])}const Ye=te(Ge,[["render",Je]]),Qe={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 h-full flex flex-col"},Xe={class:"flex-grow relative min-h-[300px] flex items-center justify-center"},et={key:1,class:"flex flex-col items-center justify-center text-gray-400 w-full h-full bg-gray-50 rounded-lg border-2 border-dashed border-gray-200"},tt=x({__name:"OrderTypeChart",props:{summaryData:{}},emits:["order-type-click"],setup(m,{emit:t}){L.register(O,F,N,M,T,j);const g=m,s=t,p=f(()=>g.summaryData),o=f(()=>({labels:p.value.map(u=>u.tipePesanan||"Lainnya"),datasets:[{label:"Total Pendapatan",data:p.value.map(u=>parseFloat(u.total_revenue)),backgroundColor:["#BAB772","#E5E7EB"],borderRadius:6,barThickness:40}]})),c={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",callbacks:{label:function(u){const r=u.raw,a=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r);return`${u.dataset.label}: ${a}`}}}},scales:{y:{beginAtZero:!0,grid:{color:"#f3f4f6"},ticks:{callback:function(u){return u>=1e6?(u/1e6).toFixed(1)+" jt":u>=1e3?(u/1e3).toFixed(0)+" rb":u}}},x:{grid:{display:!1}}},onClick:(u,r)=>{if(r&&r.length>0){const a=r[0].index,l=p.value[a];l&&s("order-type-click",l.tipePesanan)}}};return(u,r)=>(n(),i("div",Qe,[r[1]||(r[1]=e("div",{class:"mb-6"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Tipe Pesanan"),e("p",{class:"text-sm text-gray-500"},"Online vs Offline")],-1)),e("div",Xe,[p.value&&p.value.length>0?(n(),D(k(H),{key:0,data:o.value,options:c},null,8,["data"])):(n(),i("div",et,[...r[0]||(r[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("span",{class:"text-sm"},"Belum ada data tipe pesanan",-1)])]))])]))}}),at={class:"bg-gray-50 min-h-screen p-6 md:p-8 font-sans"},st={class:"mb-8 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},rt={class:"flex flex-col sm:flex-row items-start sm:items-center gap-3"},ot={class:"flex items-center bg-white p-1 rounded-lg border border-gray-200 shadow-sm"},lt=["max"],nt=["min","max"],dt={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 rounded-md shadow-sm"},it={class:"flex"},ct={class:"ml-3"},ut={class:"text-sm text-red-700"},pt={key:2,class:"space-y-8"},gt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"},mt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ht={class:"lg:col-span-2"},bt={class:"lg:col-span-1"},vt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},yt={class:"lg:col-span-2 flex flex-col gap-6"},ft={class:"lg:col-span-1"},wt=x({__name:"MainDashboard",setup(m){const t=ae({loading:!1,error:null,summaryCards:[],dailySalesGraph:null,productContributionChart:[],revenuePerLocationChart:[],productReviews:[],orderTypeChart:[],startDate:"",endDate:"",selectedProductId:null,selectedLocationId:null,selectedOrderType:null}),g=new Date().toISOString().split("T")[0],s=(a,l)=>{const d=new Map;return a.forEach(h=>{d.set(h.lokasiId,{lokasiId:h.lokasiId,lokasi_name:h.lokasi_name,total_revenue:h.total_revenue})}),l.forEach(h=>{const b=d.get(h.lokasiId);b&&d.set(h.lokasiId,{...b,total_products_sold:h.total_products_sold})}),Array.from(d.values())},p=(a,l,d)=>{const h=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],b=[],w=[],A=new Map;a.forEach(v=>{const R=v.pemesanan_date.split("T")[0];A.set(R,parseFloat(v.total_revenue)||0)});let C,$;l&&d?(C=new Date(l),$=new Date(d)):($=new Date,C=new Date,C.setDate($.getDate()-6));for(let v=new Date(C);v<=$;v.setDate(v.getDate()+1)){const R=v.toISOString().split("T")[0],G=v.getDay(),q=A.get(R)||0;b.push(h[G]),w.push(q)}return{labels:b,data:w}},o=async()=>{t.loading=!0,t.error=null;try{const[a,l,d,h,b]=await Promise.all([oe(t.startDate,t.endDate,t.selectedProductId,t.selectedLocationId,t.selectedOrderType),le(t.startDate,t.endDate,t.selectedLocationId,t.selectedProductId,t.selectedOrderType),ne(t.startDate,t.endDate,t.selectedProductId,t.selectedLocationId,t.selectedOrderType),de(t.startDate,t.endDate,t.selectedProductId,t.selectedLocationId,t.selectedOrderType),ie(t.startDate,t.endDate,t.selectedProductId,t.selectedLocationId,t.selectedOrderType)]),w=a.data.data;t.summaryCards=s(w.revenuePerLocation,w.productsSoldPerLocation),t.dailySalesGraph=p(w.revenuePerDay,t.startDate,t.endDate),t.productContributionChart=l.data.data,t.productReviews=d.data.data,t.revenuePerLocationChart=h.data.data,t.orderTypeChart=b.data.data}catch(a){console.error("Failed to fetch dashboard data:",a),t.error=a.message||"Gagal terhubung ke server backend."}finally{t.loading=!1}},c=a=>{t.selectedProductId===a?t.selectedProductId=null:t.selectedProductId=a,o()},u=a=>{t.selectedLocationId===a?t.selectedLocationId=null:t.selectedLocationId=a,o()},r=a=>{t.selectedOrderType===a?t.selectedOrderType=null:t.selectedOrderType=a,o()};return se(o),re(()=>[t.startDate,t.endDate],()=>{o()}),(a,l)=>(n(),i("div",at,[e("div",st,[l[3]||(l[3]=e("div",null,[e("h1",{class:"text-2xl font-extrabold text-gray-900 tracking-tight"}," Dashboard "),e("p",{class:"text-sm text-gray-500 mt-1"},"Selamat datang kembali, Admin! Berikut ringkasan performa bisnis Anda.")],-1)),e("div",rt,[e("div",ot,[E(e("input",{type:"date","onUpdate:modelValue":l[0]||(l[0]=d=>t.startDate=d),max:k(g),class:"border-none focus:ring-0 text-xs text-gray-600 bg-transparent p-1.5 w-28",placeholder:"Mulai"},null,8,lt),[[z,t.startDate]]),l[2]||(l[2]=e("span",{class:"text-gray-400 text-xs px-1"},"-",-1)),E(e("input",{type:"date","onUpdate:modelValue":l[1]||(l[1]=d=>t.endDate=d),min:t.startDate,max:k(g),class:"border-none focus:ring-0 text-xs text-gray-600 bg-transparent p-1.5 w-28",placeholder:"Selesai"},null,8,nt),[[z,t.endDate]])])])]),t.loading?(n(),D(Ye,{key:0})):t.error?(n(),i("div",dt,[e("div",it,[l[4]||(l[4]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",ct,[e("p",ut,y(t.error),1)])])])):(n(),i("div",pt,[e("div",gt,[(n(!0),i(B,null,P(t.summaryCards,d=>(n(),D(ye,{key:d.lokasiId,location:d},null,8,["location"]))),128))]),e("div",mt,[e("div",ht,[_(Oe,{"graph-data":t.dailySalesGraph},null,8,["graph-data"])]),e("div",bt,[_(He,{"summary-data":t.productContributionChart,onProductClick:c},null,8,["summary-data"])])]),e("div",vt,[e("div",yt,[_(Ee,{"revenue-data":t.revenuePerLocationChart,onLocationClick:u},null,8,["revenue-data"]),_(tt,{"summary-data":t.orderTypeChart,onOrderTypeClick:r},null,8,["summary-data"])]),e("div",ft,[_(Le,{reviews:t.productReviews},null,8,["reviews"])])])]))]))}});export{wt as default};
